!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).SvgPlant={})}(this,(function(t){"use strict";var e=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){function n(t,e){var n=[],r=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(e)).join(".")+"]"}),function(o,i){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?r.splice(s,1/0,o):r.push(o),~n.indexOf(i)&&(i=e.call(this,o,i))}else n.push(i);return null==t?i:t.call(this,o,i)}}(t.exports=function(t,e,r,o){return JSON.stringify(t,n(e,o),r)}).getSerialize=n})),n=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},r=function(t){return function(){var r,o,i=48,s=1,a=i,h=new Array(i),g=0,u=new n;for(r=0;r<i;r++)h[r]=u(Math.random());var f=function(){++a>=i&&(a=0);var t=1768863*h[a]+2.3283064365386963e-10*s;return h[a]=t-(s=0|t)},l=function(t){return Math.floor(t*(f()+11102230246251565e-32*(2097152*f()|0)))};l.string=function(t){var e,n="";for(e=0;e<t;e++)n+=String.fromCharCode(33+l(94));return n};var c=function(){var t=Array.prototype.slice.call(arguments);for(r=0;r<t.length;r++)for(o=0;o<i;o++)h[o]-=u(t[r]),h[o]<0&&(h[o]+=1)};return l.cleanString=function(t){return t=(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},l.hashString=function(t){for(t=l.cleanString(t),u(t),r=0;r<t.length;r++)for(g=t.charCodeAt(r),o=0;o<i;o++)h[o]-=u(g),h[o]<0&&(h[o]+=1)},l.seed=function(t){null==t&&(t=Math.random()),"string"!=typeof t&&(t=e(t,(function(t,e){return"function"==typeof e?e.toString():e}))),l.initState(),l.hashString(t)},l.addEntropy=function(){var t=[];for(r=0;r<arguments.length;r++)t.push(arguments[r]);c(g+++(new Date).getTime()+t.join("")+Math.random())},l.initState=function(){for(u(),r=0;r<i;r++)h[r]=u(" ");s=1,a=i},l.done=function(){u=null},void 0!==t&&l.seed(t),l.range=function(t){return l(t)},l.random=function(){return l(Number.MAX_VALUE-1)/Number.MAX_VALUE},l.floatBetween=function(t,e){return l.random()*(e-t)+t},l.intBetween=function(t,e){return Math.floor(l.random()*(e-t+1))+t},l}()};r.create=function(t){return new r(t)};var o=r,i={node:function(t,e){var n=document.createElement(t);return i.attr(n,e),n},nodeNS:function(t,e,n){var r=document.createElementNS(n,t);return i.attr(r,e),r},attr:function(t,e){for(var n in e)t.setAttribute(n,e[n])},svg:{root:function(t){var e=i.svg.node("svg",t);return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e},node:function(t,e){var n=i.nodeNS(t,{},"http://www.w3.org/2000/svg");return i.attr(n,e),n},stroke:function(t,e){var n=t.color;void 0===n&&(n="#000");var r=t.w;void 0===r&&(r=1);var o=t.opacity;void 0===o&&(o=1);var i=t.cap;void 0===i&&(i="square");var s=t.join;void 0===s&&(s="miter");var a=t.dash;void 0===a&&(a="");var h=t.nss;return void 0===h&&(h=!1),void 0===e&&(e={}),e.stroke=n,e["stroke-width"]=r,e["stroke-linecap"]=i,e["stroke-linejoin"]=s,a&&(e["stroke-dasharray"]=a),o<1&&(e["stroke-opacity"]=o),h&&(e["vector-effect"]="non-scaling-stroke"),e},compilePathDescription:function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var o=r[n];1==o.length?e.push(o):2==o.length?e.push(o[0],o[1]):3==o.length&&e.push(o[0],o[1],o[2])}return e.join(" ")}}},s={toRadians:function(t){return t*(Math.PI/180)},fromAngle:function(t,e,n,r,o,i){void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0);var a=[Math.sin(s.toRadians(t))*e+n,-Math.cos(s.toRadians(t))*e+r];return i&&(a[0]=Math.round(a[0]*i),a[1]=Math.round(a[1]*i)),o&&a.unshift(o),a},rectFromLine:function(t,e,n,r,o,i,a){return o/=2,i/=2,[s.fromAngle(n-90,o,t[0],t[1],"M",a),s.fromAngle(r-90,i,e[0],e[1],"L",a),s.fromAngle(r+90,i,e[0],e[1],"L",a),s.fromAngle(n+90,o,t[0],t[1],"L",a),"Z"]},pointOnLine:function(t,e,n){return[t[0]+n*(e[0]-t[0]),t[1]+n*(e[1]-t[1])]},distance:function(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},a={rootPosAngle:function(t,e,n){var r=t.range(-e,e);return{x:r,segmentAngle:n*(Math.abs(r)/e)*(r<0?-1:1)}},segmentAngle:function(t){return void 0!==t.attr.segmentAngle?t.attr.segmentAngle:t.attr.angle},nextAngle:function(t,e,n,r,o){if(e.isOffshoot)return n.attr.angle;var i=this.segmentAngle(n);if(o){var s=e.branchNum>0||n.treeRoot.attr.x>=0?1:-1;return i+(n.pos.num%2?1:-1)*t.range(0,r)*s}return i+t.range(-r,r)},archingBranchAngle:function(t,e,n,r,o){if(e.isOffshoot)return n.attr.angle;var i=a.segmentAngle(n),s=n.branchRoot.attr.branchArchAngle;return i+(o?1-o+o*(1-e.numFactor):1)*s+t.range(-r,r)},repeat:function(t,e,n,r,o){void 0===o&&(o=!0);var i=[];if("function"==typeof n&&(r=n,n=1),n<=0)return i;var s=n<1;if(Array.isArray(e))for(var a=0,h=e;a<h.length;a+=1){var g=h[a];s&&!t.test(n)||i.push(r(g))}else if("object"==typeof e)for(var u=e.from;u<=e.to;u+=e.step)s&&!t.test(n)||i.push(r(u));else{n>1&&n>e&&(e=t.intRange(e,n));for(var f=0;f<e;f++)s&&!t.test(n)||i.push(r(f))}return o&&t.shuffle(i),i}},h=function(t){void 0===t&&(t={});var e=t.x0,n=t.x1,r=t.y0,o=t.y1;this.x0=1/0,this.x1=-1/0,this.y0=1/0,this.y1=-1/0,void 0!==e&&(this.x0=e),void 0!==n&&(this.x1=n),void 0!==r&&(this.y0=r),void 0!==o&&(this.y1=o)},g={width:{configurable:!0},height:{configurable:!0},aspectRatio:{configurable:!0},data:{configurable:!0},pointsArray:{configurable:!0},viewBox:{configurable:!0}};h.prototype.addX=function(t){return t<this.x0&&(this.x0=t),t>this.x1&&(this.x1=t),this},h.prototype.addY=function(t){return t<this.y0&&(this.y0=t),t>this.y1&&(this.y1=t),this},h.prototype.addPoint=function(t,e){return this.addX(t),this.addY(e),this},h.prototype.addBBox=function(t){return this.addX(t.x0),this.addX(t.x1),this.addY(t.y0),this.addY(t.y1),this},h.prototype.expand=function(t){return this.x0-=t,this.x1+=t,this.y0-=t,this.y1+=t,this},h.prototype.contains=function(t,e){return e?this.x0<t.x0&&this.x1>t.x1&&this.y0<t.y0&&this.y1>t.y1:this.x0<=t.x0&&this.x1>=t.x1&&this.y0<=t.y0&&this.y1>=t.y1},h.prototype.containedBy=function(t,e){return e?this.x0>t.x0&&this.x1<t.x1&&this.y0>t.y0&&this.y1<t.y1:this.x0>=t.x0&&this.x1<=t.x1&&this.y0>=t.y0&&this.y1<=t.y1},h.prototype.containsPoint=function(t,e,n){return n?!(t<=this.x0||t>=this.x1||e<=this.y0||e>=this.y1):!(t<this.x0||t>this.x1||e<this.y0||e>this.y1)},h.prototype.clone=function(){return new h(this.data)},h.prototype.withPrecision=function(t){return new h({x0:Math.round(this.x0*t),x1:Math.round(this.x1*t),y0:Math.round(this.y0*t),y1:Math.round(this.y1*t)})},g.width.get=function(){return this.x1-this.x0},g.height.get=function(){return this.y1-this.y0},g.aspectRatio.get=function(){return this.width/this.height},g.data.get=function(){return{x0:this.x0,x1:this.x1,y0:this.y0,y1:this.y1}},g.pointsArray.get=function(){return[[this.x0,this.y0],[this.x1,this.y1]]},g.viewBox.get=function(){return this.x0+" "+this.y0+" "+this.width+" "+this.height},Object.defineProperties(h.prototype,g);var u=function(t,e,n){this.maxBranchNum=t,this.getNode=e,this.getOffshoots=n,this.roots=[]};u.prototype.grow=function(){var t=this.getOffshoots(null);for(var e in t)this.growBranch(null,e,t[e].n,t[e].attr)},u.prototype.growBranch=function(t,e,n,r){var o=!t,i=this.addNode(t,!0,e,n,r);o&&this.roots.push(i);var s=this.maxBranchNum==i.pos.branchNum;if(!s&&o){var a=this.getOffshoots(i);for(var h in a)this.growBranch(i,h,a[h].n,a[h].attr)}for(var g=0;g<n;g++)if(i=this.addNode(i,!1,e,n),!s){var u=this.getOffshoots(i);for(var f in u)this.growBranch(i,f,u[f].n,u[f].attr)}},u.prototype.addNode=function(t,e,n,r,o){var i=this.getPos(t?t.pos:null,e,r),s={pos:i,attr:Object.assign({},o||{},this.getNode(i,t,o)||{}),offshoots:[],prev:null,next:null,branchRoot:null,treeRoot:null};return t?(s.prev=t,s.branchRoot=e?s:t.isOffshoot?t:t.branchRoot,s.treeRoot=t.treeRoot?t.treeRoot:t,e?(t.offshoots.push(s),s.offshootNum=n):t.next=s):(s.branchRoot=s,s.treeRoot=s,s.offshootNum=n),s},u.prototype.getPos=function(t,e,n){if(!t)return{num:0,branchNum:0,height:0,offshootHeight:0,isRoot:!0,isLast:0==n,isLastBranch:0==this.maxBranchNum,isOffshoot:e,numFactor:1,branchFactor:1};var r={num:e?0:t.num+1,branchNum:e?t.branchNum+1:t.branchNum,height:e?t.height:t.height+1,offshootHeight:e?t.num:t.offshootHeight,isRoot:!1,isLast:!1,isLastBranch:!1,isOffshoot:e};return r.num==n&&(r.isLast=!0),r.branchNum==this.maxBranchNum&&(r.isLastBranch=!0),r.numFactor=n?1-r.num/n:1,r.branchFactor=this.maxBranchNum?1-r.branchNum/this.maxBranchNum:1,r},u.prototype.eachSegment=function(t){for(var e=0,n=this.roots;e<n.length;e+=1){var r=n[e];this._each(r,t)}},u.prototype._each=function(t,e){for(;t;){t.pos.num>0&&e(t.prev,t);for(var n=0,r=t.offshoots;n<r.length;n+=1){var o=r[n];this._each(o.next,e)}t=t.next}};var f=function(t){var e=!!t&&("stroke-width"in t?t["stroke-width"]:2);e&&(t["stroke-width"]=e);var n,r=e?e/2:0;t||(t={}),t.d=i.svg.compilePathDescription([["M",r,r],["L",100-r,r],["L",100-r-(n={rimHeight:20,rimLipOuter:2,rimLipInner:4,bottom:15}).rimLipOuter,n.rimHeight],["L",100-r-n.rimLipInner,n.rimHeight],["L",100-r-n.bottom,100-r],["L",r+n.bottom,100-r],["L",r+n.rimLipInner,n.rimHeight],["L",r+n.rimLipOuter,n.rimHeight],"Z"]);var o=i.svg.node("path",t),s=i.svg.root({class:"svg-plant-pot",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMax meet"});return s.appendChild(o),s};function l(t,e){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e)}function c(t,e){t.minY>e?t.minY=e:t.maxY<e&&(t.maxY=e)}function p(t,e,n,r,o){var i=1-t;return i*i*i*e+3*i*i*t*n+3*i*t*t*r+t*t*t*o}function d(t,e,n,r,o,i,s,a){var h={};h.minX=Math.min(t,s),h.minY=Math.min(e,a),h.maxX=Math.max(t,s),h.maxY=Math.max(e,a);var g=n-t,u=r-e,f=o-n,d=i-r,m=s-o,v=a-i;if(n<h.minX||n>h.maxX||o<h.minX||o>h.maxX){var y=g,b=f,x=m;y+x!==2*b&&(b+=1e-4);var A=2*(y-b),w=2*(y-2*b+x);0===w&&(w=1e-4);var S=(2*b-2*y)*(2*b-2*y)-2*y*w,L=Math.sqrt(S),_=(A+L)/w,O=(A-L)/w;0<_&&_<1&&l(h,p(_,t,n,o,s)),0<O&&O<1&&l(h,p(O,t,n,o,s))}return(r<h.minY||r>h.maxY||i<h.minY||i>h.maxY)&&((y=u)+(x=v)!==2*(b=d)&&(b+=1e-4),0===(w=2*(y-2*b+x))&&(w=1e-4),S=(2*b-2*y)*(2*b-2*y)-2*y*w,O=((A=2*(y-b))-(L=Math.sqrt(S)))/w,0<(_=(A+L)/w)&&_<1&&c(h,p(_,e,r,i,a)),0<O&&O<1&&c(h,p(O,e,r,i,a))),{x0:h.minX,x1:h.maxX,y0:h.minY,y1:h.maxY}}var m=function(t){return t.length?[Math.round(1e4*t[0]),Math.round(1e4*t[1])]:Math.round(1e4*t)},v=function(t,e,n,r){this.base=t,this.bottomWidth=n.attr.width,this.topWidth=r.attr.width,this.angle=void 0!==n.attr.segmentAngle?n.attr.segmentAngle:n.attr.angle,this.bottomAngle=n.attr.angle,this.topAngle=r.attr.angle,this.length=n.attr.length,this.top=s.fromAngle(this.angle,this.length,this.base[0],this.base[1]),this.ageOffset=n.attr.totalLength,this.branchNum=n.pos.branchNum,this.style=e,this.bbox=this.getBoundingBox()};v.prototype.getPoints=function(t){var e=this.getAgeFactor(t);if(e){var n=this.top;return e<1&&(n=s.fromAngle(this.angle,this.length*e,this.base[0],this.base[1])),s.rectFromLine(this.base,n,this.bottomAngle,this.topAngle,this.bottomWidth,this.topWidth,1e4)}},v.prototype.getBoundingBox=function(){var t=s.rectFromLine(this.base,this.top,this.bottomAngle,this.topAngle,this.bottomWidth,this.topWidth,!1),e=new h;return e.addPoint(t[0][1],t[0][2]),e.addPoint(t[1][1],t[1][2]),e.addPoint(t[2][1],t[2][2]),e.addPoint(t[3][1],t[3][2]),e},v.prototype.getAgeFactor=function(t){return t<=this.ageOffset?0:t>=this.ageOffset+this.length?1:(t-this.ageOffset)/this.length},v.prototype.getOffsetPoint=function(t,e){if(!t)return e?1==e?this.top:s.fromAngle(this.angle,this.length*e,this.base[0],this.base[1]):this.base;var n=this.angle<0?1:-1;if(!e)return s.fromAngle(this.bottomAngle+90*n,this.bottomWidth/2*t,this.base[0],this.base[1]);if(1==e)return s.fromAngle(this.topAngle+90*n,this.topWidth/2*t,this.top[0],this.top[1]);var r=[s.fromAngle(this.bottomAngle+90*n,this.bottomWidth/2,this.base[0],this.base[1]),s.fromAngle(this.topAngle+90*n,this.topWidth/2,this.top[0],this.top[1])],o=[s.fromAngle(this.bottomAngle+90*n,-this.bottomWidth/2,this.base[0],this.base[1]),s.fromAngle(this.topAngle+90*n,-this.topWidth/2,this.top[0],this.top[1])],i=[s.pointOnLine(r[0],r[1],e),s.pointOnLine(o[0],o[1],e)];return t=1-(t/2+.5),s.pointOnLine(i[0],i[1],t)};var y=function(t,e){var n=e.angle,r=e.length,o=e.handles,i=e.style,a=e.xOffset,h=e.yOffset,g=t.getOffsetPoint(a,h);this.base=g,this.pBase=m(g),this.angle=n,this.length=r,this.handles=o,this.top=s.fromAngle(n,r,g[0],g[1]),this.ageOffset=t.ageOffset+t.length*h,this.style=i,this.bbox=this.getBoundingBox()};y.prototype.getPoints=function(t){var e=this.getAgeFactor(t);if(e){var n=this.top;e<1&&(n=s.fromAngle(this.angle,this.length*e,this.base[0],this.base[1]));var r=this.getCurves(n,e,1e4);return n=m(n),["M",this.pBase,"C",r.up[0],r.up[1],n,"C",r.down[0],r.down[1],this.pBase]}},y.prototype.getBoundingBox=function(){var t=this.getCurves(this.top,1,!1),e=new h(d(this.base[0],this.base[1],t.up[0][0],t.up[0][1],t.up[1][0],t.up[1][1],this.top[0],this.top[1]));return e.addBBox(d(this.top[0],this.top[1],t.down[0][0],t.down[0][1],t.down[1][0],t.down[1][1],this.base[0],this.base[1])),this.style["stroke-width"]&&e.expand(this.style["stroke-width"]/2),e},y.prototype.getCurves=function(t,e,n){var r=this.handles.bottomAngle,o=this.handles.bottomLength*e,i=this.handles.topAngle,a=this.handles.topLength*e;return{up:[s.fromAngle(this.angle+r,this.length*o,this.base[0],this.base[1],"",n),s.fromAngle(this.angle+i,this.length*a,t[0],t[1],"",n)],down:[s.fromAngle(this.angle-i,this.length*a,t[0],t[1],"",n),s.fromAngle(this.angle-r,this.length*o,this.base[0],this.base[1],"",n)]}},y.prototype.getAgeFactor=function(t){return t<=this.ageOffset?0:t>=this.ageOffset+this.length?1:(t-this.ageOffset)/this.length};var b=function(){this.segments=[],this.leaves=[]};b.prototype.addSegment=function(t,e){var n=this.segments[t];n||(n=[],this.segments[t]=n),n.push(e)},b.prototype.addLeaf=function(t,e){var n=this.leaves[t];n||(n=[],this.leaves[t]=n),n.push(e)},b.prototype.getArray=function(){for(var t=[],e=0;e<this.segments.length;e++)t=(t=t.concat(this.segments[e]||[])).concat(this.sortLeaves(this.leaves[e]));return t},b.prototype.sortLeaves=function(t){return t?t.sort((function(t,e){if(e.bbox.containsPoint(t.base[0],t.base[1],!0))return-1;if(t.bbox.containsPoint(e.base[0],e.base[1],!0))return 1;var n=s.distance(t.base,[0,0]);return s.distance(e.base,[0,0])-n})):[]};var x=function(t){this.genus=t};x.prototype.init=function(){var t=this;this.genus.reset();var e=this.getTree();e.grow(),this.bbox=new h({x0:-this.genus.width/2,x1:this.genus.width/2,y0:-this.genus.height,y1:0});var n=new b,r=new Map,o=0;e.eachSegment((function(e,i){var s=function(e){if(!e.prev){var n=[e.attr.x||0,0];return t.bbox.addPoint(n[0],n[1]),n}if(e.pos.isOffshoot){var o=r.get(e.prev);if(o)return o;var i=[e.prev.attr.x||0,0];return r.set(e.prev,i),t.bbox.addPoint(i[0],i[1]),i}return r.get(e)}(e),a=t.genus.getSegmentStyle(e,i),h=new v(s,a,e,i);r.set(i,h.top),t.bbox.addBBox(h.bbox),n.addSegment(e.pos.branchNum,h),t.genus.getLeaves(e,i).map((function(r,i){var s=new y(h,r);t.bbox.addBBox(s.bbox),n.addLeaf(e.pos.branchNum,s),s.ageOffset+s.length>o&&(o=s.ageOffset+s.length)})),i.attr.totalLength>o&&(o=i.attr.totalLength)})),this.parts=n.getArray(),this.maxAge=o;var i=Math.max(Math.abs(this.bbox.x0),Math.abs(this.bbox.x1));this.bbox.x0=-i,this.bbox.x1=i,this.yFactor=this.bbox.height/-this.bbox.y0||1},x.prototype.getTree=function(){var t=this;return new u(this.genus.maxBranchNum,(function(e,n,r){return{width:t.genus.getNodeWidth(e,n,r),angle:n?t.genus.getSegmentAngle(e,n,r):0,length:e.isLast?n?n.attr.length:0:t.genus.getSegmentLength(e,n,r),totalLength:n?(e.isOffshoot?0:n.attr.length)+n.attr.totalLength:0}}),(function(e){return e?t.genus.getOffshoots(e):t.genus.getRoots()}))},x.prototype.render=function(t,e,n){void 0===e&&(e=!0),t*=this.maxAge;for(var r=0,o=this.parts;r<o.length;r+=1){var s=o[r],a=s.getPoints(t);if(a){var h={},g={};e&&(g={},(h=s.style)["stroke-width"]&&(g["stroke-width"]=m(h["stroke-width"])));var u=Object.assign({},h,g,{d:i.svg.compilePathDescription(a)});n.appendChild(i.svg.node("path",u))}}},x.prototype.getSvg=function(t,e){this.segments||this.init();var n=i.svg.root({class:"svg-plant-body",viewBox:this.bbox.withPrecision(1e4).viewBox,preserveAspectRatio:"xMidYMax meet"});return this.render(t,e,n),n};var A=function(t,e){if(this._cfg={color:!0,age:1,potSize:.3,potPathAttr:{fill:"#fc7",stroke:"#da5"}},"object"==typeof e)for(var n in this._cfg)n in e&&(this[n]=e[n]);this.body=new x(t)},w={seed:{configurable:!0},color:{configurable:!0},age:{configurable:!0},potSize:{configurable:!0},potPathAttr:{configurable:!0},svgElement:{configurable:!0},potSvgElement:{configurable:!0},bodySvgElement:{configurable:!0}};w.seed.get=function(){return this.body.genus.rngSeed},w.color.get=function(){return this._cfg.color},w.color.set=function(t){(t=!!t)!=this._cfg.color&&(this._cfg.color=t,this.update())},w.age.get=function(){return this._cfg.age},w.age.set=function(t){(t=Math.max(0,Math.min(t,1)))!=this._cfg.age&&(this._cfg.age=t,this.update(!0,!1))},w.potSize.get=function(){return this._cfg.potSize},w.potSize.set=function(t){(t=Math.max(0,Math.min(t,1)))!=this._cfg.potSize&&(this._cfg.potSize=t,this.update(!1,!0))},w.potPathAttr.get=function(){return this._cfg.potPathAttr},w.potPathAttr.set=function(t){t!=this._cfg.potPathAttr&&(this._cfg.potPathAttr=t,this.update(!1,!0))},A.prototype.update=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&(this._bodySvgElement=null),e&&(this._potSvgElement=null),this.updateSvgElement()},w.svgElement.get=function(){return this._svgElement||(this._svgElement=this.getSvgElement()),this._svgElement},A.prototype.updateSvgElement=function(){var t=this._svgElement;t&&(t.innerHTML=this.getSvgElement().innerHTML)},A.prototype.getSvgElement=function(){var t=i.svg.root({class:"svg-plant",viewBox:"0 0 1 1",preserveAspectRatio:"xMidYMax meet"}),e=function(t,e,n,r,o){t.setAttribute("x",e),t.setAttribute("y",n),t.setAttribute("width",r),t.setAttribute("height",o)},n=this.potSvgElement,r=this.bodySvgElement;if(this._cfg.potSize>=1)t.appendChild(n),e(n,0,0,1,1);else if(this._cfg.potSize<=0)t.appendChild(r),e(r,0,0,1,1);else{t.appendChild(n),e(n,0,1-this._cfg.potSize,1,this._cfg.potSize),t.appendChild(r);var o,s=this._cfg.color?0:.001,a=1-this._cfg.potSize;if(this.body.yFactor>1)if(1/a<this.body.bbox.width/-this.body.bbox.y0){var h=-this.body.bbox.y0/this.body.bbox.width;o=a+(h*this.body.yFactor-h)}else o=a*this.body.yFactor;else o=a;e(r,0,0,1,o+s)}return t},w.potSvgElement.get=function(){return 0==this._cfg.potSize?null:(this._potSvgElement||(this._potSvgElement=this.getPotSvgElement()),this._potSvgElement)},A.prototype.getPotSvgElement=function(){return this._cfg.color?f(this._cfg.potPathAttr):f()},w.bodySvgElement.get=function(){return 1==this._cfg.potSize?null:(this._bodySvgElement||(this._bodySvgElement=this.getBodySvgElement()),this._bodySvgElement)},A.prototype.getBodySvgElement=function(){return this.body.getSvg(this._cfg.age,this._cfg.color)},A.prototype.animate=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=3e3),this.cancelAnimation(),this._animation={fromAge:t,toAge:e,ageSpan:e-t,currentAge:t,durationMs:n,nextAnimationFrame:void 0,paused:!0},this.resumeAnimation()},A.prototype.pauseAnimation=function(){this._animation&&(cancelAnimationFrame(this._animation.nextAnimationFrame),this._animation.paused=!0)},A.prototype.cancelAnimation=function(){this.pauseAnimation(),this._animation=null},A.prototype.resumeAnimation=function(){var t=this,e=this._animation;if(e&&e.paused){e.paused=!1,this.age=e.currentAge;var n,r=function(o){if(n){var i=function(t){return t<0?0:t>1?1:.5*Math.sin((t-.5)*Math.PI)+.5}(Math.min(1,(o-n)/e.durationMs));i<1?(t._cfg.age=e.fromAge+i*e.ageSpan,e.currentAge=t._cfg.age,t._bodySvgElement=null,t.updateSvgElement(),e.nextAnimationFrame=requestAnimationFrame(r)):(t.age=e.toAge,t._animation=null)}else{var s=(e.currentAge-e.fromAge)/e.ageSpan;n=o-((a=s)<0?0:a>1?1:Math.asin(2*a-1)/Math.PI+.5)*e.durationMs,e.nextAnimationFrame=requestAnimationFrame(r)}var a};e.nextAnimationFrame=requestAnimationFrame(r)}},Object.defineProperties(A.prototype,w);var S=function(t){this.rng=function(t){var e;void 0===t&&(t=1*(Math.random()+"").substring(2));var n={get seed(){return t},reset:function(){e=new o(t).random},random:function(t){return void 0===t&&(t=1),e()*t},test:function(t,n,r){return void 0===t&&(t=.5),void 0===n&&(n=!0),void 0===r&&(r=!1),t>=1?n:t<=0?r:e()<t?n:r},range:function(t,n){return t==n?t:t+e()*(n-t)},intRange:function(t,n){return t==n?t:t+Math.floor(e()*(n-t+1))},ranges:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=1/t.length;t=[].concat(t);for(var o=t.pop(),i=0,s=t;i<s.length;i+=1){var a=s[i],h=a[2]||r;if(n.test(h))return n.range(a[0],a[1])}return n.range(o[0],o[1])},shuffle:function(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(e()*(n+1)),o=t[n];t[n]=t[r],t[r]=o}return t}};return n.reset(),n}(t),this.width=4,this.height=4,this.maxBranchNum=1,this.segmentStyle={fill:"#161",stroke:"#041","stroke-width":.0075},this.leafStyle={stroke:"#0d5",fill:"rgba(0,255,110,.9)","stroke-width":.02},this.leafCurveHandles={bottomAngle:60,bottomLength:.6,topAngle:179,topLength:.2}},L={genusName:{configurable:!0},rngSeed:{configurable:!0}},_={genusName:{configurable:!0}};_.genusName.get=function(){var t=this.name;return t.substring(0,t.length-5)},L.genusName.get=function(){var t=this.constructor.name;return t.substring(0,t.length-5)},L.rngSeed.get=function(){return this.rng.seed},S.prototype.reset=function(){this.rng.reset()},S.prototype.getRoots=function(){return[{n:3,attr:{x:0,segmentAngle:0}}]},S.prototype.getOffshoots=function(t){return t.pos.isLast||0==t.pos.num?[]:[{n:1,attr:{segmentAngle:t.attr.angle-60}},{n:1,attr:{segmentAngle:t.attr.angle+60}}]},S.prototype.getNodeWidth=function(t,e,n){return.1},S.prototype.getSegmentLength=function(t,e,n){return 1},S.prototype.getSegmentAngle=function(t,e,n){return t.isOffshoot?e.attr.angle:void 0!==e.attr.segmentAngle?e.attr.segmentAngle:e.attr.angle},S.prototype.getSegmentStyle=function(t,e){return this.segmentStyle},S.prototype.getLeaves=function(t,e){return e.pos.isLast?[{angle:e.attr.angle,length:1,handles:this.leafCurveHandles,style:this.leafStyle,xOffset:0,yOffset:.95}]:[]},Object.defineProperties(S.prototype,L),Object.defineProperties(S,_);var O=function(t){function e(e){t.call(this,e),this.width=6.1,this.height=6.6,this.maxBranchNum=3,this.segmentStyle={fill:"#400",stroke:"#931","stroke-width":.0075},this.leafStyle={stroke:"#0d5",fill:"rgba(0,255,110,.9)","stroke-width":.02},this.leafCurveHandles={bottomAngle:60,bottomLength:.6,topAngle:179,topLength:.2}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRoots=function(){return[{n:this.rng.intRange(4,6),attr:a.rootPosAngle(this.rng,.5,6)}]},e.prototype.getOffshoots=function(t){var e=this;if(t.pos.isLast||0==t.pos.num)return[];var n=.5*(.5+.5*t.pos.numFactor)*(.5+.5*t.pos.branchFactor),r=[],o=function(){return 4-t.pos.branchNum-e.rng.test(.6,1,0)};return this.rng.test(n)&&r.push({n:o(),attr:{segmentAngle:t.attr.angle+this.rng.range(25,60)}}),this.rng.test(n)&&r.push({n:o(),attr:{segmentAngle:t.attr.angle+this.rng.range(-60,-25)}}),r},e.prototype.getNodeWidth=function(t,e,n){return t.isOffshoot&&e?e.attr.width:.1*(.1+.9*t.branchFactor)},e.prototype.getSegmentLength=function(t,e,n){if(!e)return 1;if(!t.isOffshoot&&t.branchNum>0)return.75*e.attr.length;if(!t.isOffshoot)return e.attr.length;var r=.2+.8*(e.branchRoot.prev?e.branchRoot.prev.pos.numFactor:1);return e.attr.length*r},e.prototype.getSegmentAngle=function(t,e,n){return t.branchNum>0?a.nextAngle(this.rng,t,e,16,!0):a.nextAngle(this.rng,t,e,8,!0)},e.prototype.getSegmentStyle=function(t,e){return this.segmentStyle},e.prototype.getLeaves=function(t,e){var n=this;if(0==e.pos.branchNum&&e.pos.num<2)return[];var r=[],o=function(t){r.push({angle:e.attr.angle+(t?t*n.rng.range(20,40):n.rng.range(-10,10)),length:n.rng.range(.5,.75),handles:n.leafCurveHandles,style:n.leafStyle,xOffset:t?-t*n.rng.range(0,.5):0,yOffset:t?n.rng.range(.3,.7):.95})};return e.pos.isLast&&this.rng.test(.5)&&o(0),this.rng.test(.5)&&o(1),this.rng.test(.5)&&o(-1),r},e}(S),M=function(t){function e(e){t.call(this,e),this.width=10.3,this.height=8.6,this.maxBranchNum=1,this.segmentStyle={fill:"#400",stroke:"#931","stroke-width":.0075},this.leafStyle={stroke:"#0d5",fill:"rgba(0,255,110,.9)","stroke-width":.02},this.leafCurveHandles={bottomAngle:30,bottomLength:.2,topAngle:179,topLength:.2}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRoots=function(){return[{n:this.rng.intRange(2,4),attr:a.rootPosAngle(this.rng,.5,6)}]},e.prototype.getOffshoots=function(t){var e=this;if(!t.pos.isLast)return[];var n=a.repeat(this.rng,{from:-60,to:60,step:30},.75,(function(n){return{n:2,attr:{segmentAngle:t.attr.angle+n+e.rng.range(-10,10)}}}));return n.length||n.push({n:2,attr:{segmentAngle:this.rng.range(-60,60)}}),n},e.prototype.getNodeWidth=function(t,e,n){return t.isOffshoot&&e?e.attr.width:1==t.branchNum?this.rng.range(.2,.3):this.rng.range(.4,.6)},e.prototype.getSegmentLength=function(t,e,n){return 1==t.branchNum?this.rng.range(.2,.8):this.rng.range(.5,1.5)},e.prototype.getSegmentAngle=function(t,e,n){return a.nextAngle(this.rng,t,e,8,!0)},e.prototype.getSegmentStyle=function(t,e){return this.segmentStyle},e.prototype.getLeaves=function(t,e){var n=this;return e.pos.isLast&&1==e.pos.branchNum?a.repeat(this.rng,{from:-75,to:75,step:10},.5,(function(t){var r=n.rng.range(-5,5),o=n.rng.range(-.7,.7);return{angle:e.attr.angle+t+r,length:3.5+o,handles:n.leafCurveHandles,style:n.leafStyle,xOffset:n.rng.range(-.2,.2),yOffset:n.rng.range(.8,.95)}})):[]},e}(S),N=function(t){function e(e){t.call(this,e),this.width=3.6,this.height=3.5,this.maxBranchNum=0,this.segmentStyle={stroke:"#041",fill:"#161","stroke-width":.0075},this.leafStyle={stroke:"#0d5",fill:"rgba(0,255,110,.9)","stroke-width":.01},this.leafCurveHandles={bottomAngle:24,bottomLength:.6,topAngle:179,topLength:.2}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRoots=function(){var t=this;return a.repeat(this.rng,1,3,(function(){return{n:t.rng.intRange(5,7),attr:Object.assign({},a.rootPosAngle(t.rng,.25,15),{branchArchAngle:t.rng.ranges([-30,-5],[5,30])})}}))},e.prototype.getOffshoots=function(t){return[]},e.prototype.getNodeWidth=function(t,e,n){return e?.8*e.attr.width:.1},e.prototype.getSegmentLength=function(t,e,n){return e?e.attr.length*this.rng.range(.6,.9):this.rng.range(.4,1)},e.prototype.getSegmentAngle=function(t,e,n){return a.archingBranchAngle(this.rng,t,e,5,.6)},e.prototype.getSegmentStyle=function(t,e){return this.segmentStyle},e.prototype.getLeaves=function(t,e){var n=this,r=1.2*e.treeRoot.attr.length*(.5+.5*Math.sin(Math.PI*e.pos.numFactor)),o=e.pos.isLast?[-70,-30,30,70]:[-70,70];return a.repeat(this.rng,o,.89,(function(t){var o=n.rng.range(-6,6),i=n.rng.range(-.1,.1),s=Math.abs(t)<70?.9:1;return{angle:e.attr.angle+t+o,length:r*s+i,handles:n.leafCurveHandles,style:n.leafStyle,xOffset:0,yOffset:1}}))},e}(S),B=function(t){function e(e){t.call(this,e),this.width=4.6,this.height=4.1,this.maxBranchNum=1,this.segmentStyle={stem:{stroke:"#931",fill:"#400","stroke-width":.0075},offshoot:{stroke:"#931",fill:"#400","stroke-width":.0075},branch:{stroke:"#041",fill:"#161","stroke-width":.0075}},this.leafStyle={stroke:"#0d5",fill:"rgba(0,255,110,.9)","stroke-width":.02},this.leafCurveHandles={bottomAngle:80,bottomLength:1,topAngle:100,topLength:.2}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRoots=function(){return[{n:this.rng.intRange(0,3),attr:a.rootPosAngle(this.rng,.25,8)}]},e.prototype.getOffshoots=function(t){var e=this;return t.pos.isLast?a.repeat(this.rng,1,12,(function(){return{n:e.rng.intRange(3,6),attr:{segmentAngle:t.attr.angle+e.rng.range(-40,40),branchArchAngle:e.rng.ranges([-40,-5],[5,40])}}})):t.pos.num?a.repeat(this.rng,0,4,(function(){return{n:e.rng.intRange(2,3),attr:{segmentAngle:t.attr.angle+e.rng.ranges([-80,-40],[40,80]),branchArchAngle:e.rng.ranges([-40,-5],[5,40])}}})):[]},e.prototype.getNodeWidth=function(t,e,n){return 0==t.branchNum?this.rng.range(.1,.3):t.isOffshoot?e.attr.width:this.rng.range(.05,.1)},e.prototype.getSegmentLength=function(t,e,n){return e?0==t.branchNum?.9*e.attr.length:t.isOffshoot?this.rng.range(.1,.2):1==t.num?e.branchRoot.pos.isLast?this.rng.range(.6,1.2):this.rng.range(.3,.6):.75*e.attr.length:this.rng.range(.6,1.2)},e.prototype.getSegmentAngle=function(t,e,n){return 0==t.branchNum?this.rng.range(-8,8):a.archingBranchAngle(this.rng,t,e,5,.1)},e.prototype.getSegmentStyle=function(t,e){return 0==t.pos.branchNum?this.segmentStyle.stem:t.pos.isOffshoot?this.segmentStyle.offshoot:this.segmentStyle.branch},e.prototype.getLeaves=function(t,e){if(!e.pos.isLast||1!=e.pos.branchNum)return[];var n=(e.treeRoot.attr.length||1)*this.rng.range(.4,1.5);return[{angle:a.segmentAngle(t)+this.rng.range(-8,8),length:n,handles:this.leafCurveHandles,style:this.leafStyle,xOffset:0,yOffset:.96}]},e}(S),P=Object.freeze({__proto__:null,testPlantBodySize:function(t,e){void 0===e&&(e=1e3);for(var n={width:0,height:0},r=[],o=[],i=0;i<e;i++){var s=new A(new t).body;s.genus.width=0,s.genus.height=0,s.init(),n.width+=s.bbox.width,n.height+=s.bbox.height,r.push(s.bbox.width),o.push(s.bbox.height)}return r.sort((function(t,e){return t-e})),o.sort((function(t,e){return t-e})),{avg:{width:n.width/e,height:n.height/e},q:function(t){var n=Math.max(0,Math.min(e-1,Math.round(t/100*(e-1))));return console.log(n),{width:r[n],height:o[n]}}}},findSeed:function(t,e,n){void 0===n&&(n=1e4);for(var r,o=!1,i=0,s=Date.now(),a=setTimeout((function(){o=!0}),n);;){var h=new A(new t).body;if(h.genus.width=0,h.genus.height=0,h.init(),i++,e(h)){clearTimeout(a),r=h.genus.rngSeed,console.log("Seed found!",r);break}if(o){console.log("No seed was found");break}}var g=((Date.now()-s)/1e3).toFixed(2);return console.log("findSeed finished after "+g+" seconds and "+i+" tries."),r},testPerformance:function(t,e){void 0===e&&(e=1e4);for(var n=Date.now(),r=0;;){var o=new A(new t).body;if(o.genus.width=0,o.genus.height=0,o.init(),r++,Date.now()-n>e)break}var i=Date.now()-n,s=i/1e3;console.group(t.genusName+" Performance Test"),console.log("created "+r+" plants in "+s.toFixed(2)+" seconds"),console.log((r/s).toFixed(2)+" plants/sec"),console.log((i/r).toFixed(2)+" ms/plant"),console.groupEnd()}}),k={BushyPlant:O,DragonTree:M,Zamia:N,Pilea:B};t.BaseGenus=S,t.BushyPlantGenus=O,t.DevTools=P,t.DragonTreeGenus=M,t.Genera=k,t.PileaGenus=B,t.SvgPlant=A,t.ZamiaGenus=N,t.plantHelper=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=svg-plant.min.umd.js.map
